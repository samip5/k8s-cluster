---
apiVersion: traefik.containo.us/v1alpha1
kind: IngressRouteTCP
metadata:
  name: tcp-authelia-dev
  namespace: security
spec:
  entryPoints:
    - websecure
  routes:
    - match: HostSNI(`sso.${SECRET_DOMAIN}`)
      priority: 10
      services:
        - name: authelia-dev-api
          port: 9091
  tls:
    secretName: sso-${SECRET_DOMAIN}-tls
    domains:
      - main: sso.${SECRET_DOMAIN}
---
apiVersion: traefik.containo.us/v1alpha1
kind: IngressRouteTCP
metadata:
  name: tcp-authelia-fi
  namespace: security
spec:
  entryPoints:
    - websecure
  routes:
    - match: HostSNI(`sso.${MAIN_DOMAIN}`)
      priority: 10
      services:
        - name: authelia-fi-api
          port: 9091
  tls:
    secretName: sso-${MAIN_DOMAIN}-tls
    domains:
      - main: sso.${MAIN_DOMAIN}

